---
const base = import.meta.env.BASE_URL;
---

<section class="hero" aria-labelledby="hero-heading">
  <!-- Subtle background texture -->
  <div class="hero-bg" aria-hidden="true">
    <!-- Grid overlay -->
    <div class="hero-grid"></div>
    <!-- Compass rose watermark -->
    <svg class="hero-compass" viewBox="0 0 400 400" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle cx="200" cy="200" r="190" stroke="currentColor" stroke-width="1" opacity="0.08"/>
      <circle cx="200" cy="200" r="140" stroke="currentColor" stroke-width="0.5" opacity="0.06"/>
      <circle cx="200" cy="200" r="80" stroke="currentColor" stroke-width="0.5" opacity="0.05"/>
      <!-- Cardinal directions -->
      <path d="M200 10 L214 160 L200 140 L186 160 Z" fill="currentColor" opacity="0.12"/>
      <path d="M200 390 L214 240 L200 260 L186 240 Z" fill="currentColor" opacity="0.07"/>
      <path d="M390 200 L240 214 L260 200 L240 186 Z" fill="currentColor" opacity="0.07"/>
      <path d="M10 200 L160 214 L140 200 L160 186 Z" fill="currentColor" opacity="0.07"/>
      <!-- Intercardinal lines -->
      <line x1="200" y1="200" x2="340" y2="60" stroke="currentColor" stroke-width="0.5" opacity="0.05"/>
      <line x1="200" y1="200" x2="60" y2="60" stroke="currentColor" stroke-width="0.5" opacity="0.05"/>
      <line x1="200" y1="200" x2="340" y2="340" stroke="currentColor" stroke-width="0.5" opacity="0.05"/>
      <line x1="200" y1="200" x2="60" y2="340" stroke="currentColor" stroke-width="0.5" opacity="0.05"/>
    </svg>
  </div>

  <div class="container hero-content">
    <!-- Eyebrow -->
    <p class="hero-eyebrow">
      <svg class="eyebrow-icon" viewBox="0 0 16 16" fill="none" aria-hidden="true">
        <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.2"/>
        <path d="M8 1.5 L9 6 L8 5.2 L7 6 Z" fill="currentColor"/>
        <path d="M8 14.5 L9 10 L8 10.8 L7 10 Z" fill="currentColor" opacity="0.6"/>
        <path d="M14.5 8 L10 9 L10.8 8 L10 7 Z" fill="currentColor" opacity="0.6"/>
        <path d="M1.5 8 L6 9 L5.2 8 L6 7 Z" fill="currentColor" opacity="0.6"/>
        <circle cx="8" cy="8" r="1.5" fill="#c89b3c"/>
      </svg>
      npm install tiller-ai
    </p>

    <!-- Heading -->
    <h1 id="hero-heading" class="hero-heading">
      Steer your<br/>
      <em>AI coding</em><br/>
      sessions
    </h1>

    <!-- Subtitle -->
    <p class="hero-subtitle">
      Tiller scaffolds Claude Code projects with a structured vibe loop —
      orient, plan, build, review, dock — so every AI coding session stays
      focused and ships clean code.
    </p>

    <!-- CTA code block -->
    <div class="hero-cta">
      <div class="cta-code-block" role="region" aria-label="Quick start command">
        <span class="cta-prompt" aria-hidden="true">$</span>
        <code class="cta-command">npx tiller-ai init</code>
        <button
          class="cta-copy"
          aria-label="Copy command to clipboard"
          data-copy="npx tiller-ai init"
        >
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" width="14" height="14" aria-hidden="true">
            <rect x="5" y="5" width="9" height="9" rx="1.5"/>
            <path d="M2 11V3a1 1 0 011-1h8"/>
          </svg>
          <span class="copy-text">Copy</span>
        </button>
      </div>
      <p class="cta-note">Works with Claude Code. Node.js 22+ required.</p>
    </div>

    <!-- Supporting links -->
    <div class="hero-links">
      <a href="#how-it-works" class="hero-link-primary">
        See how it works
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14" aria-hidden="true">
          <path d="M8 2l6 6-6 6M2 8h12"/>
        </svg>
      </a>
      <a href="https://github.com/hmschuller/tiller-ai" class="hero-link-secondary" target="_blank" rel="noopener noreferrer">
        View on GitHub
      </a>
    </div>
  </div>

  <!-- Wave divider -->
  <div class="wave-divider" aria-hidden="true">
    <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none">
      <path d="M0 40 C240 70 480 10 720 40 C960 70 1200 10 1440 40 L1440 80 L0 80 Z" fill="#faf7f0"/>
    </svg>
  </div>
</section>

<style>
  .hero {
    position: relative;
    background-color: var(--navy-900);
    color: var(--text-inverse);
    padding: var(--space-32) 0 0;
    overflow: hidden;
    min-height: 92vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
  }

  /* Background elements */
  .hero-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .hero-grid {
    position: absolute;
    inset: 0;
    background-image:
      linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px);
    background-size: 60px 60px;
  }

  .hero-compass {
    position: absolute;
    right: -8%;
    top: 50%;
    transform: translateY(-55%);
    width: min(60vw, 600px);
    height: auto;
    color: var(--cream-100);
  }

  @media (min-width: 768px) {
    .hero-compass {
      right: -5%;
      width: min(55vw, 520px);
    }
  }

  /* Content */
  .hero-content {
    position: relative;
    z-index: 1;
    padding-bottom: var(--space-24);
    max-width: 680px;
  }

  .hero-eyebrow {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-mono);
    font-size: var(--text-sm);
    color: var(--gold-300);
    letter-spacing: 0.06em;
    margin-bottom: var(--space-6);
    border: 1px solid rgba(200, 155, 60, 0.3);
    padding: var(--space-2) var(--space-4);
    border-radius: 100px;
    background-color: rgba(200, 155, 60, 0.08);
  }

  .eyebrow-icon {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
    color: var(--gold-400);
  }

  .hero-heading {
    font-family: var(--font-serif);
    font-size: clamp(var(--text-4xl), 7vw, var(--text-6xl));
    font-weight: 700;
    line-height: 1.08;
    letter-spacing: -0.02em;
    color: var(--cream-100);
    margin-bottom: var(--space-6);
  }

  .hero-heading em {
    font-style: italic;
    color: var(--gold-300);
  }

  .hero-subtitle {
    font-size: var(--text-lg);
    line-height: 1.7;
    color: var(--text-inverse-muted);
    max-width: 540px;
    margin-bottom: var(--space-10);
  }

  /* CTA */
  .hero-cta {
    margin-bottom: var(--space-8);
  }

  .cta-code-block {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3);
    background-color: rgba(255, 255, 255, 0.06);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: var(--radius-lg);
    padding: var(--space-4) var(--space-6);
    font-family: var(--font-mono);
    margin-bottom: var(--space-3);
  }

  .cta-prompt {
    color: var(--teal-300);
    font-size: var(--text-lg);
    font-weight: 500;
    user-select: none;
  }

  .cta-command {
    font-size: var(--text-lg);
    color: var(--cream-100);
    letter-spacing: 0.02em;
  }

  .cta-copy {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-1) var(--space-3);
    background-color: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: var(--radius-sm);
    color: var(--navy-100);
    font-size: var(--text-xs);
    font-family: var(--font-sans);
    font-weight: 500;
    transition: all var(--transition-fast);
    cursor: pointer;
    margin-left: var(--space-2);
  }

  .cta-copy:hover {
    background-color: rgba(255, 255, 255, 0.14);
    color: var(--cream-100);
  }

  .cta-copy.copied {
    color: var(--teal-300);
    border-color: rgba(46, 188, 188, 0.4);
  }

  .copy-text {
    font-size: var(--text-xs);
  }

  .cta-note {
    font-size: var(--text-sm);
    color: var(--text-inverse-muted);
    opacity: 0.7;
  }

  /* Links */
  .hero-links {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    flex-wrap: wrap;
  }

  .hero-link-primary {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--teal-300);
    text-decoration: none;
    transition: gap var(--transition-fast), color var(--transition-fast);
  }

  .hero-link-primary:hover {
    color: var(--teal-100);
    gap: var(--space-3);
  }

  .hero-link-secondary {
    font-size: var(--text-base);
    font-weight: 500;
    color: var(--navy-200);
    text-decoration: underline;
    text-underline-offset: 3px;
    text-decoration-color: rgba(138, 171, 214, 0.4);
    transition: color var(--transition-fast), text-decoration-color var(--transition-fast);
  }

  .hero-link-secondary:hover {
    color: var(--cream-100);
    text-decoration-color: var(--cream-100);
  }

  /* Wave */
  .wave-divider {
    width: 100%;
    line-height: 0;
    margin-top: var(--space-16);
  }

  .wave-divider svg {
    width: 100%;
    height: 80px;
    display: block;
  }
</style>

<script>
  // Copy button for hero CTA
  const copyBtn = document.querySelector('.cta-copy') as HTMLButtonElement | null;
  if (copyBtn) {
    copyBtn.addEventListener('click', async () => {
      const text = copyBtn.dataset.copy ?? '';
      try {
        await navigator.clipboard.writeText(text);
        copyBtn.classList.add('copied');
        const label = copyBtn.querySelector('.copy-text');
        if (label) label.textContent = 'Copied!';
        setTimeout(() => {
          copyBtn.classList.remove('copied');
          if (label) label.textContent = 'Copy';
        }, 2000);
      } catch {
        // Fallback: select text
      }
    });
  }
</script>
