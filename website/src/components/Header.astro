---
const base = import.meta.env.BASE_URL;
---

<header class="header">
  <div class="container header-inner">
    <!-- Logo -->
    <a href={base} class="logo" aria-label="Tiller home">
      <svg class="logo-icon" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <!-- Compass rose -->
        <circle cx="14" cy="14" r="13" fill="none" stroke="currentColor" stroke-width="1.5" opacity="0.4"/>
        <path d="M14 2 L16 11.5 L14 10 L12 11.5 Z" fill="currentColor"/>
        <path d="M14 26 L16 16.5 L14 18 L12 16.5 Z" fill="currentColor" opacity="0.5"/>
        <path d="M26 14 L16.5 12 L18 14 L16.5 16 Z" fill="currentColor" opacity="0.5"/>
        <path d="M2 14 L11.5 12 L10 14 L11.5 16 Z" fill="currentColor" opacity="0.5"/>
        <circle cx="14" cy="14" r="2" fill="#c89b3c"/>
      </svg>
      <span class="logo-text">Tiller</span>
    </a>

    <!-- Nav -->
    <nav class="nav" aria-label="Main navigation">
      <ul class="nav-list">
        <li><a href="#features" class="nav-link">Features</a></li>
        <li><a href="#how-it-works" class="nav-link">How it Works</a></li>
        <li><a href="#getting-started" class="nav-link">Get Started</a></li>
      </ul>
    </nav>

    <!-- GitHub link -->
    <a
      href="https://github.com/hmschuller/tiller-ai"
      class="github-link"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="View on GitHub"
    >
      <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="20" height="20">
        <path d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/>
      </svg>
      <span class="github-label">GitHub</span>
    </a>

    <!-- Mobile menu toggle -->
    <button class="menu-toggle" id="menu-toggle" aria-expanded="false" aria-controls="mobile-menu" aria-label="Toggle menu">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="22" height="22" aria-hidden="true">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>
  </div>

  <!-- Mobile nav -->
  <div class="mobile-menu" id="mobile-menu" hidden>
    <nav aria-label="Mobile navigation">
      <ul class="mobile-nav-list">
        <li><a href="#features" class="mobile-nav-link">Features</a></li>
        <li><a href="#how-it-works" class="mobile-nav-link">How it Works</a></li>
        <li><a href="#getting-started" class="mobile-nav-link">Get Started</a></li>
        <li>
          <a href="https://github.com/hmschuller/tiller-ai" class="mobile-nav-link" target="_blank" rel="noopener noreferrer">
            GitHub â†’
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<style>
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: rgba(10, 22, 40, 0.97);
    backdrop-filter: blur(8px);
    border-bottom: 1px solid rgba(200, 155, 60, 0.2);
  }

  .header-inner {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    height: 64px;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    color: var(--cream-100);
    text-decoration: none;
    flex-shrink: 0;
  }

  .logo-icon {
    width: 28px;
    height: 28px;
    color: var(--cream-100);
  }

  .logo-text {
    font-family: var(--font-serif);
    font-size: var(--text-xl);
    font-weight: 700;
    letter-spacing: 0.02em;
    color: var(--cream-100);
  }

  .nav {
    margin-left: auto;
  }

  .nav-list {
    display: none;
    align-items: center;
    gap: var(--space-8);
  }

  @media (min-width: 768px) {
    .nav-list {
      display: flex;
    }
  }

  .nav-link {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--navy-100);
    letter-spacing: 0.04em;
    text-transform: uppercase;
    transition: color var(--transition-fast);
  }

  .nav-link:hover {
    color: var(--gold-300);
  }

  .github-link {
    display: none;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    background-color: transparent;
    border: 1px solid rgba(200, 155, 60, 0.4);
    border-radius: var(--radius-md);
    color: var(--gold-300);
    font-size: var(--text-sm);
    font-weight: 500;
    transition: all var(--transition-fast);
    text-decoration: none;
    flex-shrink: 0;
  }

  @media (min-width: 768px) {
    .github-link {
      display: flex;
    }
  }

  .github-link:hover {
    background-color: rgba(200, 155, 60, 0.12);
    border-color: var(--gold-400);
    color: var(--gold-200);
  }

  .menu-toggle {
    margin-left: auto;
    color: var(--cream-100);
    padding: var(--space-2);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @media (min-width: 768px) {
    .menu-toggle {
      display: none;
    }
  }

  .mobile-menu {
    background-color: var(--navy-900);
    border-top: 1px solid rgba(200, 155, 60, 0.15);
    padding: var(--space-4) var(--space-6);
  }

  .mobile-nav-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
  }

  .mobile-nav-link {
    display: block;
    padding: var(--space-3) var(--space-2);
    color: var(--navy-100);
    font-size: var(--text-base);
    font-weight: 500;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    transition: color var(--transition-fast);
  }

  .mobile-nav-link:last-child {
    border-bottom: none;
  }

  .mobile-nav-link:hover {
    color: var(--gold-300);
  }

  .github-label {
    font-size: var(--text-sm);
  }
</style>

<script>
  const toggle = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');

  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      const isOpen = !menu.hidden;
      menu.hidden = isOpen;
      toggle.setAttribute('aria-expanded', String(!isOpen));
    });

    // Close menu on nav link click
    menu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        menu.hidden = true;
        toggle.setAttribute('aria-expanded', 'false');
      });
    });
  }
</script>
